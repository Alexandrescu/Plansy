@using DayPilot.Web.Mvc
@using DayPilot.Web.Mvc.Enums.Calendar
@model List<MaProgramez.Website.ViewModels.SlotSchedulesViewModel>

@{
    ViewBag.Title = Resource.MySchedules;
    var date = (DateTime)ViewBag.Date;
}


<script src="/scripts/daypilot-all.min.js" type="text/javascript"></script>

<section class="filtre">

    <div class="container">
        <div class="col-lg-3 schedule">
            <h4>@Resource.MySchedules</h4>
</div><!-- /.col-lg-3 -->

        <div class="col-lg-3 schedule">
            <h4>  (@date.ToShortDateString() - @date.AddDays(6).ToShortDateString())</h4>
</div><!-- /.col-lg-3 -->
        <div class="col-lg-6 sch float-right" style="margin-right:-165px">
            <a class="btn btn-primary btn-lg buton5" href="@Url.Action(MVC.Schedule.ViewAllSlotsSchedules(date.AddDays(-7)))" role="button">@Resource.PreviousDays</a>
            <a class="btn btn-primary btn-lg buton5" href="@Url.Action(MVC.Schedule.ViewAllSlotsSchedules(date.AddDays(7)))" role="button">@Resource.NextDays</a>
        </div><!-- /.col-lg-3 -->

    </div>
</section>
<div class="up-toticket">
    &nbsp;
</div>
<section class="sectiune-cat stilizat-cat">
    <div class="container stilizat">

        <div class="col-md-12">
            @if (Model.Any())
            {
                string div;
                switch (Model.Count)
                {
                    case 1:
                        div = "col-md-12";
                        break;
                    case 2:
                        div = "col-md-6";
                        break;
                    case 3:
                    case 5:
                    case 6:
                    case 9:
                        div = "col-md-4";
                        break;
                    default:
                        div = "col-md-3";
                        break;
                }
                foreach (var t in Model)
                {
                    <div class=@div style="margin-bottom: 25px;">
                        <h4 style="margin-bottom:10px;">
                            @t.Slot.Name (@t.Schedules.Count)
                            <a href=@Url.Action(MVC.Schedule.ViewPendingSchedules(t.Slot.Id)) data-toggle="tooltip" title=@Resource.PendingSchedules style="float: right;"><i class="glyphicon glyphicon-calendar font-warning"></i></a>
                        </h4>
                        @Html.DayPilotCalendar("dpc" + t.Slot.Id, new DayPilotCalendarConfig
                   {
                       StartDate = date.Date,
                       BackendUrl = Url.Action(MVC.Schedule.Backend(t.Slot.Id)),
                       EventClickHandling = DayPilot.Web.Mvc.Events.Calendar.EventClickHandlingType.CallBack,
                       TimeRangeSelectedHandling = DayPilot.Web.Mvc.Events.Calendar.TimeRangeSelectedHandlingType.CallBack,
                       ViewType = DayPilot.Web.Mvc.Enums.Calendar.ViewType.Day,
                       HeightSpec = HeightSpec.BusinessHours,
                   })
                    </div>
                }
            }
            else
            {
                <p>@Resource.NoSlots</p>
            }
        </div>

        <div class="clear"></div>
        <div class="col-md-12">
            <div class="well well-sm" style="margin-top: 20px">
                <p style="margin-bottom:0; font-weight:bold;" class="font-normal">
                    @Resource.ViewSchedules_Info1;
                </p>
                <p style="margin-bottom:0; font-weight:bold;" class="font-warning">
                    @Resource.ViewSchedules_Info2.
                </p>

            </div>
        </div>
        <div class="clear"></div>
    </div>
</section>
